function loadPage(a){$("#content-root").hide(),""!=a&&void 0!=a||(a="suggestions"),$("#content-root").load("templates/"+a+".html",function(b,c,d){if("error"==c)$("#content-root").load("templates/404.html",function(){});else{var e=a.replace(/-/,"_")+"_handler";if(window[e]){var e=window[e];document.title=e.properties.title,table=$("#datatable").DataTable({ajax:e.properties.ajaxURL,colReorder:!0,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],order:[],scrollX:!0,autoFill:!1,select:{style:"selected",items:"row",blurable:!0},fixedHeader:!0,fixedColumns:{leftColumns:1},columns:e.columns,columnDefs:[{targets:"no-sort",orderable:!1}],rowId:"id",initComplete:function(){table.columns(".search").every(function(){var a=this;$('<input type="text" placeholder="Search...">').appendTo($(a.footer()).empty()).on("keyup change",function(){a.search()!==this.value&&a.search(this.value).draw()})}),table.columns(".select").every(function(){var a=this,b=$('<select><option value=""></option></select>').appendTo($(a.footer()).empty()).on("change",function(){var b=$.fn.dataTable.util.escapeRegex($(this).val());a.search(b?"^"+b+"$":"",!0,!1).draw()});a.data().unique().sort().each(function(a,c){b.append('<option value="'+a+'">'+a+"</option>")})}),table.columns.adjust().draw()}}),e.events()}}}),$("#content-root").fadeIn("slow")}$body=$("body");var table;$(document).on({ajaxStart:function(){$body.addClass("loading")},ajaxStop:function(){$body.removeClass("loading")},ajaxError:function(){$body.removeClass("loading")}}),$(function(){function a(){loadPage(window.location.hash.substring(1).split("/")[1])}$.ajaxSetup({cache:!1}),$(window).on("hashchange",function(){a()}),$(window).load(function(){a()})});var getUrlParameter=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]||b[1].replace("/","")};comments_handler={properties:{title:"Comments",singular:"comment",ajaxURL:"../admin/config/data.php/comments/"},columns:[{data:null,defaultContent:"<button class='btn btn-xs'>EDIT</button>"},{data:"sid",render:function(a,b,c,d){if(a){return'<a target="_blank" href="../#/view/'+a+'">'+a+"</a>"}return""}},{data:"name"},{data:"comment"},{data:"created",render:function(a,b,c,d){return a?moment.unix(a).format("MM-DD-YYYY"):""}},{data:"uip"},{data:"uipp"}],onLoad:function(){var a=this;new $.fn.dataTable.Buttons(table,{buttons:[{text:"Delete",className:"btn-danger",action:function(){a.deleteEntry()}},{extend:"collection",text:"Export",buttons:["copy","excel","pdf"]},"selectNone"]}),table.buttons().container().appendTo($(".col-sm-6:eq(0)",table.table().container()))},getSelected:function(){return table.rows({selected:!0}).ids().toArray().join(",")},deleteEntry:function(){var a=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Are you sure you want to delete?"),$(".modal-submit").text("Delete"),$("#myModal").modal(),$(".modal-submit").click(function(b){$.ajax({type:"DELETE",url:a.properties.ajaxURL+a.getSelected(),crossDomain:!1,success:function(a){a.error?alert("There was an error."):(table.ajax.reload(null,!1),$("#myModal").modal("hide"))},error:function(a,b,c){alert("There was an error.")}})})},editEntry:function(a){var b=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Edit "+b.properties.singular),$(".form").clone().removeClass("hidden").appendTo(".modal-body"),$(".modal-body input[name=name]").val(a.name),$(".modal-body textarea[name=comment]").val(a.comment),$("#myModal").modal(),$(".modal-submit").click(function(c){$(".modal-submit").prop("disabled",!0);var d={name:$("input[name=name]").val(),comment:$(".modal-body textarea[name=comment]").val()};$.ajax({type:"PUT",url:b.properties.ajaxURL+a.id,crossDomain:!1,data:d,success:function(a){a.error?alert("There was an error."):($("#myModal").modal("hide"),table.ajax.reload(null,!1)),$(".modal-submit").prop("disabled",!1)},error:function(a,b,c){alert("There was an error."),$(".modal-submit").prop("disabled",!1)}})})},events:function(){var a=this;a.onLoad(),$("#datatable tbody").on("click","button",function(){var b=table.row($(this).parents("tr")).data();a.editEntry(b)})}},likes_handler={properties:{title:"Individual Votes",singular:"vote",ajaxURL:"../admin/config/data.php/likes/"},columns:[{data:"sid",render:function(a,b,c,d){if(a){return'<a target="_blank" href="../#/view/'+a+'">'+a+"</a>"}return""}},{data:"type"},{data:"created",render:function(a,b,c,d){return a?moment.unix(a).format("MM-DD-YYYY"):""}},{data:"uip"},{data:"uipp"}],onLoad:function(){var a=this;new $.fn.dataTable.Buttons(table,{buttons:[{text:"Delete",className:"btn-danger",action:function(){a.deleteEntry()}},{extend:"collection",text:"Export",buttons:["copy","excel","pdf"]},"selectNone"]}),table.buttons().container().appendTo($(".col-sm-6:eq(0)",table.table().container()))},getSelected:function(){return table.rows({selected:!0}).ids().toArray().join(",")},deleteEntry:function(){var a=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Are you sure you want to delete?"),$(".modal-submit").text("Delete"),$("#myModal").modal(),$(".modal-submit").click(function(b){$.ajax({type:"DELETE",url:a.properties.ajaxURL+a.getSelected(),crossDomain:!1,success:function(a){a.error?alert("There was an error."):(table.ajax.reload(null,!1),$("#myModal").modal("hide"))},error:function(a,b,c){alert("There was an error.")}})})},editEntry:function(a){var b=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Edit "+b.properties.singular),$(".form").clone().removeClass("hidden").appendTo(".modal-body"),$(".modal-body input[name=name]").val(a.name),$(".modal-body textarea[name=comment]").val(a.comment),$("#myModal").modal(),$(".modal-submit").click(function(c){$(".modal-submit").prop("disabled",!0);var d={name:$("input[name=name]").val(),comment:$(".modal-body textarea[name=comment]").val()};$.ajax({type:"PUT",url:b.properties.ajaxURL+a.id,crossDomain:!1,data:d,success:function(a){a.error?alert("There was an error."):($("#myModal").modal("hide"),table.ajax.reload(null,!1)),$(".modal-submit").prop("disabled",!1)},error:function(a,b,c){alert("There was an error."),$(".modal-submit").prop("disabled",!1)}})})},events:function(){var a=this;a.onLoad(),$("#datatable tbody").on("click","button",function(){var b=table.row($(this).parents("tr")).data();a.editEntry(b)})}},signups_handler={properties:{title:"Comments",singular:"comment",ajaxURL:"../admin/config/data.php/signups/"},columns:[{data:"id"},{data:"name"},{data:"email"},{data:"created",render:function(a,b,c,d){return a?moment.unix(a).format("MM-DD-YYYY"):""}},{data:"uip"},{data:"uipp"}],onLoad:function(){var a=this;new $.fn.dataTable.Buttons(table,{buttons:[{text:"Delete",className:"btn-danger",action:function(){a.deleteEntry()}},{extend:"collection",text:"Export",buttons:["copy","excel","pdf"]},"selectNone"]}),table.buttons().container().appendTo($(".col-sm-6:eq(0)",table.table().container()))},getSelected:function(){return table.rows({selected:!0}).ids().toArray().join(",")},deleteEntry:function(){var a=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Are you sure you want to delete?"),$(".modal-submit").text("Delete"),$("#myModal").modal(),$(".modal-submit").click(function(b){$.ajax({type:"DELETE",url:a.properties.ajaxURL+a.getSelected(),crossDomain:!1,success:function(a){a.error?alert("There was an error."):(table.ajax.reload(null,!1),$("#myModal").modal("hide"))},error:function(a,b,c){alert("There was an error.")}})})},events:function(){this.onLoad()}},suggestions_handler={properties:{title:"Suggestions",singular:"Suggestion",ajaxURL:"../admin/config/data.php/suggestions/"},columns:[{data:null,defaultContent:"<button class='btn btn-xs'>EDIT</button>"},{data:"id",render:function(a,b,c,d){if(a){return'<a target="_blank" href="../#/view/'+a+'">'+a+"</a>"}return""}},{data:"name"},{data:"comment"},{data:"photo",render:function(a,b,c,d){return a?'<a target="_blank" href="../img/uploads/'+a+'">View</a>':""}},{data:"like"},{data:"dislike"},{data:"category"},{data:"type"},{data:"geometry"},{data:"created",render:function(a,b,c,d){return a?moment.unix(a).format("MM-DD-YYYY"):""}},{data:"uip"},{data:"uipp"}],onLoad:function(){var a=this;new $.fn.dataTable.Buttons(table,{buttons:[{text:"Delete",className:"btn-danger",action:function(){a.deleteEntry()}},{extend:"collection",text:"Export",buttons:["copy","excel","pdf",{text:"KML",action:function(){window.open("config/kml.php/suggestions")}},{text:"GEOJSON",action:function(){window.open("config/geojson.php/suggestions")}}]},"selectNone"]}),table.buttons().container().appendTo($(".col-sm-6:eq(0)",table.table().container()))},getSelected:function(){return table.rows({selected:!0}).ids().toArray().join(",")},deleteEntry:function(){var a=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Are you sure you want to delete?"),$(".modal-submit").text("Delete"),$("#myModal").modal(),$(".modal-submit").click(function(b){$.ajax({type:"DELETE",url:a.properties.ajaxURL+a.getSelected(),crossDomain:!1,success:function(a){a.error?alert("There was an error."):(table.ajax.reload(null,!1),$("#myModal").modal("hide"))},error:function(a,b,c){alert("There was an error.")}})})},editEntry:function(a){var b=this;$(".modal-body").empty(),$(".modal-submit").off("click"),$(".modal-title").text("Edit "+b.properties.singular),$(".form").clone().removeClass("hidden").appendTo(".modal-body"),$(".modal-body input[name=name]").val(a.name),$(".modal-body textarea[name=comment]").val(a.comment),$("#myModal").modal(),$(".modal-submit").click(function(c){$(".modal-submit").prop("disabled",!0);var d={name:$("input[name=name]").val(),comment:$(".modal-body textarea[name=comment]").val()};$.ajax({type:"PUT",url:b.properties.ajaxURL+a.id,crossDomain:!1,data:d,success:function(a){a.error?alert("There was an error."):($("#myModal").modal("hide"),table.ajax.reload(null,!1)),$(".modal-submit").prop("disabled",!1)},error:function(a,b,c){alert("There was an error."),$(".modal-submit").prop("disabled",!1)}})})},events:function(){var a=this;a.onLoad(),$("#datatable tbody").on("click","button",function(){var b=table.row($(this).parents("tr")).data();a.editEntry(b)})}};